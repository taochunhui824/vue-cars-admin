{"remainingRequest":"/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/node_modules/babel-loader/lib/index.js!/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/src/views/Info/category.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/src/views/Info/category.vue","mtime":1662820718991},{"path":"/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/babel.config.js","mtime":1662735149379},{"path":"/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/node_modules/cache-loader/dist/cjs.js","mtime":1662735150310},{"path":"/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/node_modules/babel-loader/lib/index.js","mtime":1662735150199},{"path":"/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/node_modules/cache-loader/dist/cjs.js","mtime":1662735150310},{"path":"/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/node_modules/vue-loader-v16/dist/index.js","mtime":1662735155993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYsIG9uTW91bnRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IEdldEluZm8sIEFkZEZpcnN0LCBEZWxDYXRlZ29yeSB9IGZyb20gJ0AvYXBpL2luZm8nOwppbXBvcnQgeyBFbE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXBsdXMnOwppbXBvcnQgeyBnbG9iYWwgfSBmcm9tICcuLi8uLi91dGlscy9nbG9iYWwnOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIHNldHVwKCkgewogICAgLy/mlbDmja4KICAgIGNvbnN0IGNhdGVnb3J5TmFtZSA9IHJlZignJyk7CiAgICBjb25zdCBkZWxJZCA9IHJlZignJyk7CiAgICBjb25zdCBhZGRJdGVtTG9hZGluZyA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBpbmZvRGF0YSA9IHJlZihbXSk7CiAgICBjb25zdCB7CiAgICAgIGNvbmZpcm0KICAgIH0gPSBnbG9iYWwoKTsgLy/nlJ/lkb3lkajmnJ8KCiAgICBvbk1vdW50ZWQoKCkgPT4gewogICAgICBnZXRJbmZvTGlzdCgpOwogICAgfSk7IC8v5paw5aKe5LiA57qn5YiG57G7CgogICAgY29uc3QgYWRkSXRlbSA9ICgpID0+IHsKICAgICAgYWRkSXRlbUxvYWRpbmcudmFsdWUgPSB0cnVlOwoKICAgICAgaWYgKCFjYXRlZ29yeU5hbWUudmFsdWUpIHsKICAgICAgICBFbE1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6ICLliIbnsbvlkI3np7DkuI3og73kuLrnqboiCiAgICAgICAgfSk7CiAgICAgICAgYWRkSXRlbUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIEFkZEZpcnN0KHsKICAgICAgICBjYXRlZ29yeU5hbWU6IGNhdGVnb3J5TmFtZS52YWx1ZQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5yZXNDb2RlID09PSAwKSB7CiAgICAgICAgICBjYXRlZ29yeU5hbWUudmFsdWUgPSAnJzsKICAgICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgICAgYWRkSXRlbUxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgIGNvbnNvbGUubG9nKGluZm9EYXRhLnZhbHVlLCByZXMuZGF0YSk7CiAgICAgICAgICBpbmZvRGF0YS52YWx1ZS5wdXNoKHJlcy5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICBjYXRlZ29yeU5hbWUudmFsdWUgPSAnJzsKICAgICAgICBhZGRJdGVtTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH07IC8v6I635Y+W5YiG57G75YiX6KGo5pWw5o2uCgoKICAgIGNvbnN0IGdldEluZm9MaXN0ID0gKCkgPT4gewogICAgICBHZXRJbmZvKCkudGhlbihyZXMgPT4gewogICAgICAgIGluZm9EYXRhLnZhbHVlID0gcmVzLmRhdGEuZGF0YTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH07IC8v5Yig6Zmk5b2T5YmN5YiG57G7CgoKICAgIGNvbnN0IGRlbENhdGVnb3J5Q29tZmlybSA9IHBhcmFtID0+IHsKICAgICAgY29uc29sZS5sb2cocGFyYW0sIHBhcmFtLmlkKTsKICAgICAgZGVsSWQudmFsdWUgPSBwYXJhbS5pZDsKICAgICAgY29uZmlybSh7CiAgICAgICAgY29udGVudDogIuehruWumuWIoOmZpOivpeadoeWIhuexu+WQlyIsCiAgICAgICAgdGlwOiAi5o+Q56S6IiwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgZm46IGRlbENhdGVnb3J5LAogICAgICAgIGNhdGNoOiAoKSA9PiB7CiAgICAgICAgICBkZWxJZC52YWx1ZSA9ICcnOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIGNvbnN0IGRlbENhdGVnb3J5ID0gKCkgPT4gewogICAgICBEZWxDYXRlZ29yeSh7CiAgICAgICAgY2F0ZWdvcnlJZDogZGVsSWQudmFsdWUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKGluZm9EYXRhLnZhbHVlKTsKICAgICAgICBpbmZvRGF0YS52YWx1ZSA9IGluZm9EYXRhLnZhbHVlLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgIT0gZGVsSWQudmFsdWUpOwogICAgICB9KS5jYXRjaChlcnIgPT4ge30pOwogICAgfTsKCiAgICByZXR1cm4gewogICAgICBkZWxJZCwKICAgICAgaW5mb0RhdGEsCiAgICAgIGNhdGVnb3J5TmFtZSwKICAgICAgYWRkSXRlbUxvYWRpbmcsCiAgICAgIGFkZEl0ZW0sCiAgICAgIGdldEluZm9MaXN0LAogICAgICBkZWxDYXRlZ29yeSwKICAgICAgZGVsQ2F0ZWdvcnlDb21maXJtCiAgICB9OwogIH0KCn0pOw=="},{"version":3,"mappings":"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","names":["defineComponent","ref","onMounted","GetInfo","AddFirst","DelCategory","ElMessage","global","setup","categoryName","delId","addItemLoading","infoData","confirm","getInfoList","addItem","value","type","message","then","res","resCode","console","log","data","push","catch","err","delCategoryComfirm","param","id","content","tip","fn","delCategory","categoryId","filter","item"],"sourceRoot":"","sources":["/Users/taochunhui/Downloads/vue-cars/vue-cars-admin/src/views/Info/category.vue"],"sourcesContent":["<!--\n * @Author: taochunhui 814995688@qq.com\n * @Date: 2022-09-04 23:04:54\n * @LastEditors: taochunhui 814995688@qq.com\n * @LastEditTime: 2022-09-10 22:38:02\n * @FilePath: /vue-cars/vue-cars-admin/src/views/Info/category.vue\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n-->\n<template>\n    <div id=\"cartegory\">\n        <!-- 搜索栏 -->\n        <div class=\"header\">\n            <el-button type=\"primary\" @click=\"\">新增一级分类</el-button>\n        </div>\n        <!-- 内容部分 -->\n        <div class=\"container\">\n            <el-row :gutter=\"30\">\n                <el-col :span=\"8\">\n                    <div class=\"category\">\n                        <el-table :data=\"infoData\" stripe style=\"width: 100%\" row-key=\"id\" border :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\">\n                            <el-table-column prop=\"category_name\" label=\"分类名称\" />\n                            <el-table-column label=\"操作\">\n                                <template #default=\"scope\">\n                                    <el-button link type=\"primary\">编辑</el-button>\n                                    <el-button link type=\"primary\">添加子级</el-button>\n                                    <el-button link type=\"danger\" @click=\"delCategoryComfirm(scope.row)\">删除</el-button>\n                                </template>\n                            </el-table-column>\n                        </el-table>\n                    </div>\n                </el-col>\n                <el-col :span=\"16\">\n                    <div class=\"header title\">一级分类编辑</div>\n                    <div class=\"info_form\">\n                        <div class=\"df aic\">\n                            <label class=\"label\">一级分类名称:</label>\n                            <el-input type=\"text\" placeholder=\"请输入一级分类名称\" style=\"width: 200px\" v-model=\"categoryName\">\n                            </el-input>\n                        </div>\n                        <div class=\"df aic mt20\">\n                            <label class=\"label\">二级分类名称:</label>\n                            <el-input type=\"text\" placeholder=\"请输入二级分类名称\" style=\"width: 200px\" v-model=\"categoryName\">\n                            </el-input>\n                        </div>\n                        <el-button type=\"primary\" @click=\"addItem\" :loading=\"addItemLoading\">确定</el-button>\n                    </div>\n                </el-col>\n            </el-row>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { defineComponent, ref, onMounted } from 'vue'\nimport { GetInfo, AddFirst, DelCategory } from '@/api/info'\nimport { ElMessage } from 'element-plus'\nimport { global } from '../../utils/global'\nexport default defineComponent({\n    setup () {\n        //数据\n        const categoryName = ref('')\n        const delId = ref('')\n        const addItemLoading = ref(false)\n        const infoData = ref([])\n        const { confirm } = global()\n\n        //生命周期\n        onMounted(() => {\n            getInfoList()\n        })\n        //新增一级分类\n        const addItem = () => {\n            addItemLoading.value = true\n            if (!categoryName.value)\n            {\n                ElMessage({\n                    type: 'error',\n                    message: \"分类名称不能为空\"\n                })\n                addItemLoading.value = false\n                return false\n            }\n            AddFirst({ categoryName: categoryName.value }).then((res) => {\n                if (res.resCode === 0) {\n                    categoryName.value = ''\n                    ElMessage({\n                        type: 'success',\n                        message: res.message\n                    })\n                    addItemLoading.value = false\n                    console.log(infoData.value, res.data)\n                    infoData.value.push(res.data)\n                }\n            }).catch((err) => {\n                console.log(err)\n                categoryName.value = ''\n                addItemLoading.value = false\n            })\n        }\n        //获取分类列表数据\n        const getInfoList = ()=> {\n            GetInfo().then((res)=>{\n                infoData.value = res.data.data\n            }).catch((err)=>{\n                console.log(err)\n            })\n        }\n        //删除当前分类\n        const delCategoryComfirm = (param)=> {\n            console.log(param,param.id)\n            delId.value = param.id\n            confirm({\n                content: \"确定删除该条分类吗\",\n                tip: \"提示\",\n                type: \"warning\",\n                fn: delCategory,\n                catch: ()=> {\n                    delId.value = ''\n                }\n            })\n        }\n\n        const delCategory = ()=> {\n            DelCategory({ categoryId: delId.value }).then((res)=>{\n                ElMessage({\n                    type: 'success',\n                    message: res.message\n                })\n                console.log(infoData.value)\n                infoData.value = infoData.value.filter(item => item.id != delId.value)\n            }).catch((err)=>{\n\n            })\n        }\n\n        return {\n            delId,\n            infoData,\n            categoryName,\n            addItemLoading,\n            addItem,\n            getInfoList,\n            delCategory,\n            delCategoryComfirm\n        }\n    }\n})\n</script>\n\n<style lang=\"scss\">\n.container {\n    .title {\n        margin-top: 10px;\n        line-height: 30px;\n        padding-left: 20px;\n    }\n\n    .info_form {\n        padding-left: 20px;\n        margin-top: 30px;\n\n        label {\n            margin-right: 10px;\n        }\n\n        .el-button {\n            margin-top: 30px;\n        }\n    }\n    .category {\n        margin-top: 10px;\n    }\n}\n</style>"]}]}